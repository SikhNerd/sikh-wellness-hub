<!DOCTYPE html>
<html lang="{{ .Lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;700&family=Noto+Sans:wght@400;700&family=Noto+Sans+Gurmukhi:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans', 'Noto Sans Gurmukhi', sans-serif;
            color: #333333;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Mukta', 'Noto Sans Gurmukhi', sans-serif;
        }
        .btn-primary {
            background-color: #FFD700;
            color: #333333;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Fully rounded */
            font-weight: bold;
        }
        .btn-secondary {
            background-color: #FFFFFF;
            color: #333333;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Fully rounded */
            border: 1px solid #87CEEB;
            font-weight: bold;
        }
        .bg-primary-light {
            background-color: #FFFBE6; /* Lighter shade of yellow for backgrounds */
        }
        .bg-secondary-light {
            background-color: #E6F7FF; /* Lighter shade of blue for backgrounds */
        }
        .bg-accent-light {
            background-color: #FCFBE6; /* Lighter shade of khaki for card backgrounds */
        }
        .text-dark-gray {
            color: #333333;
        }
        .lang-en { display: block; }
        .lang-pu { display: none; }

        /* Specific styles for the mockup */
        .hero-section {
            background-image: linear-gradient(to bottom, #FFFBE6, #E6F7FF);
            padding-top: 8rem;
            padding-bottom: 8rem;
        }
        .topic-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            text-align: left;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }
        .topic-card .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #87CEEB; /* Sky Blue for icons */
        }
        .topic-card h3 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .topic-card p {
            font-size: 0.9rem;
            color: #666666;
        }
    </style>
</head>
<body class="bg-white">
    {{ partial "header.html" . }}
    <main class="container mx-auto p-4">
        {{ block "main" . }}
        {{ end }}
    </main>
    {{ partial "footer.html" . }}

    <script>
        function setLanguage(lang) {
            localStorage.setItem('language', lang);
            updateLanguageDisplay(lang);
        }

        function updateLanguageDisplay(lang) {
            document.querySelectorAll('.lang-en').forEach(el => {
                el.style.display = (lang === 'en') ? 'block' : 'none';
            });
            document.querySelectorAll('.lang-pu').forEach(el => {
                el.style.display = (lang === 'pu') ? 'block' : 'none';
            });

            // Update toggle visual state
            const englishToggle = document.getElementById('lang-toggle-en');
            const punjabiToggle = document.getElementById('lang-toggle-pu');

            if (englishToggle && punjabiToggle) {
                if (lang === 'en') {
                    englishToggle.classList.add('font-bold', 'bg-yellow-400', 'text-dark-gray');
                    englishToggle.classList.remove('bg-white', 'text-gray-500', 'border', 'border-blue-400');
                    punjabiToggle.classList.remove('font-bold', 'bg-yellow-400', 'text-dark-gray');
                    punjabiToggle.classList.add('bg-white', 'text-gray-500', 'border', 'border-blue-400');
                } else {
                    punjabiToggle.classList.add('font-bold', 'bg-yellow-400', 'text-dark-gray');
                    punjabiToggle.classList.remove('bg-white', 'text-gray-500', 'border', 'border-blue-400');
                    englishToggle.classList.remove('font-bold', 'bg-yellow-400', 'text-dark-gray');
                    englishToggle.classList.add('bg-white', 'text-gray-500', 'border', 'border-blue-400');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            let userLang = localStorage.getItem('language');
            if (!userLang) {
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('pa')) {
                    userLang = 'pu';
                } else {
                    userLang = 'en'; // Default to English
                }
            }
            updateLanguageDisplay(userLang);

            const englishToggle = document.getElementById('lang-toggle-en');
            const punjabiToggle = document.getElementById('lang-toggle-pu');

            if (englishToggle) {
                englishToggle.addEventListener('click', () => setLanguage('en'));
            }
            if (punjabiToggle) {
                punjabiToggle.addEventListener('click', () => setLanguage('pu'));
            }
        });
    </script>
</body>
</html>